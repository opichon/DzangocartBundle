{% javascripts
	"@uamdatatables_bootstrap_mustache_js"
	'bundles/dzangocart/vendor/typeahead.js/dist/typeahead.bundle.min.js'
	'bundles/dzangocart/vendor/moment/min/moment-with-locales.min.js'
	'bundles/dzangocart/vendor/bootstrap-daterangepicker/daterangepicker.min.js'
	'bundles/dzangocart/js/ajax.js'
%}
	<script src="{{ asset_url }}"></script>
{% endjavascripts %}
<script>
var uamdatatables = {
	ajax: {
		url: "{{ path('dzangocart_order_list') }}"
	},
	columns: [
		{
			data: function( row, type, val, meta ) {
				if ( "display" === type ) {
					var template = $( "template.select" ).html();
					return Mustache.render( template, row );
				}

				return "";
			},
			orderable: false,
			visible: false
		},
		{ data: "date" },
		{ data: "order_id" },
		{ data: "customer.name" },
		{ data: "currency" },
		{
			data: "amount_excl",
			className: "number"
		},
		{
			data: "tax_amount",
			className: "number"
		},
		{
			data: "amount_incl",
			className: "number"
		},
		{
			data: "amount_paid",
			className: "number"
		},
		{ data: "affiliate" },
		{
			data: function( row, type, val, meta ) {
				if ( "display" === type ) {
					var template = $( "template.orders.test" ).html();
					return Mustache.render( template, row );
				}

				return "";
			}
		},
		{
			data: function( row, type, val, meta ) {
				if ( "display" === type ) {
					var template = $( "template.orders.actions" ).html();
					return Mustache.render( template, row );
				}

				return "";
			},
			className: "actions",
			orderable: false
		}
	],
	destroy: true,
	locale: "{{ app.request.locale }}",
	orderCellsTop: true,
	searching: false,
	stateSave: true
};

dzangocart.orders = {
	date_format: "{{ dzangocart_config.date_format }}",
	daterangepicker: {
		format: "{{ dzangocart_config.date_format|upper }}",
		ranges: {% include "DzangocartBundle::date_ranges.html.twig" %}
	}
};
</script>
