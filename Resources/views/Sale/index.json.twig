{% trans_default_domain "dzangocart" %}

{% spaceless %}
{
    "draw": "{{ app.request.query.all.sEcho }}",
    "recordsTotal": {{ meta['count_total'] }},
    "recordsFiltered": {{ meta['count_filtered'] }},
    "data" : [
        {% for sale in results %}
            {
                "DT_RowId": "{{ 'u_' ~ sale.id }}",
                "DT_RowClass": "{{ sale.isTest ? 'test' : '' }}{% if not sale.paid %} unpaid{% endif %}",
                "id": {{ sale.id() }},
                "0": "",
                "1": "{{ sale.date|localizeddate('medium', 'short', app.request.locale, null, 'dd.MM.yyyy HH:mm') }}",
                "2": "{{ sale.orderId }}",
                "3": "{{ sale.customerFullName}} ",
                "4": "{{ sale.name|raw }}",
                "5": "{{ sale.quantity|integer(app.request.locale) }}",
                "6": "{{ sale.currency }}",
                "7": "{{ sale.amountExcl|currency(sale.currency, app.request.locale) }}",
                "8": "{{ sale.amountTax|currency(sale.currency, app.request.locale) }}",
                "9": "{{ sale.amountIncl|currency(sale.currency, app.request.locale) }}",
                "10": "<i class='icon-{{ sale.paid ? 'thumbs-up-alt' : 'warning-sign' }}' />",
                "11": "{{ sale.affiliate }}",
                "12": "{% if sale.isTest %}<i class='icon-asterisk' />{% endif %}",
                "13": "{%- include 'DzangocartBundle:Sale:actions.html.twig' -%}"
            }{% if not loop.last %},{% endif %}
        {% endfor %}
    ]
}
{% endspaceless %}
