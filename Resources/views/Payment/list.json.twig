{% trans_default_domain "dzangocart" %}

{% spaceless %}
{
    "draw": "{{ app.request.query.all.draw }}",
    "recordsTotal": {{ meta['count_total'] }},
    "recordsFiltered": {{ meta['count_filtered'] }},
    "gateways": [
        {% for gateway in meta['gateways'] %}
            {
                "id":         "{{ gateway['id'] }}",
                "value":      "{{ gateway['name'] }}"
            }{% if not loop.last %},{% endif %}
        {% endfor %}
    ],
    "data" : [
        {% for payment in list %}
            {
                "DT_RowId":      "{{ 'p_' ~ payment.id }}",
                "DT_RowClass":   "{{ 'payment' }}",
                "date":          "{{ payment.date|datetime(dzangocart_config.date_format, dzangocart_config.time_format) }}",
                "order_id":      "{{ payment.orderId }}",
                "gateway":       "{{ payment.gateway }}",
                "type":          "{{ payment.type }}",
                "amount":        "{{ payment.amount|currency(payment.currency, app.request.locale) }}",
                "status":        "{{ payment.status|raw }}",
				"test":        {{ payment.test ? 1 : 0 }},
				"urls": {
				}
            }{% if not loop.last %},{% endif %}
        {% endfor %}
    ]
}
{% endspaceless %}
